---
description: "Стандарты и паттерны разработки Next.js и React"
globs: ["**/*.tsx", "**/*.ts", "**/pages/**/*", "**/components/**/*"]
alwaysApply: true
autoAttachments: ["next.config.js", "package.json", "tsconfig.json", "app/**/*", "components/**/*"]
---

# Стандарты Разработки Next.js и React

### Архитектура Приложения
- Использовать App Router для маршрутизации
- Применять Server Components где возможно
- Разделять на логические модули
- Следовать принципам чистой архитектуры
- Использовать правильную структуру директорий

### Компоненты
- Создавать переиспользуемые компоненты
- Следовать принципу единой ответственности
- Использовать TypeScript для типизации
- Применять правильное разделение логики
- Документировать API компонентов

### Управление Состоянием
- Использовать React Query для серверного состояния
- Применять Zustand для клиентского состояния
- Реализовывать оптимистичные обновления
- Правильно обрабатывать ошибки
- Использовать кэширование

### Производительность
- Оптимизировать изображения
- Использовать ленивую загрузку
- Применять кэширование
- Мониторить Core Web Vitals
- Оптимизировать бандл

### Стилизация
- Использовать Tailwind CSS
- Применять CSS модули где нужно
- Следовать методологии Mobile First
- Использовать CSS-in-JS при необходимости
- Поддерживать темную тему

### Безопасность
- Внедрять аутентификацию
- Реализовывать авторизацию
- Защищать от XSS
- Использовать HTTPS
- Валидировать входные данные

### Тестирование
- Писать unit тесты
- Реализовывать интеграционные тесты
- Использовать E2E тестирование
- Тестировать производительность
- Проверять доступность

### API Интеграция
- Использовать API Routes
- Реализовывать обработку ошибок
- Применять кэширование
- Типизировать ответы
- Документировать эндпоинты

### Деплой и CI/CD
- Использовать Vercel для деплоя
- Настраивать автоматический деплой
- Применять preview deployments
- Мониторить производительность
- Автоматизировать тестирование

### Документация
- Документировать архитектуру
- Описывать компоненты
- Вести changelog
- Создавать README
- Документировать API

### Стиль и Структура Кода
- Писать лаконичный, технический TypeScript код с точными примерами
- Использовать композиционный API и декларативные паттерны программирования
- Предпочитать итерацию и модуляризацию дублированию кода
- Использовать описательные имена переменных с вспомогательными глаголами (например, isLoading, hasError)
- Структурировать файлы: экспортируемый компонент, композиции, хелперы, статический контент, типы
- Следовать принципу единой ответственности для компонентов
- Использовать атомарный дизайн для компонентов

### Соглашения об Именовании
- Использовать нижний регистр с дефисами для директорий (например, components/auth-wizard)
- Использовать PascalCase для имен компонентов (например, AuthWizard.tsx)
- Использовать camelCase для хуков (например, useAuthState.ts)
- Группировать связанные компоненты в подпапки
- Использовать суффикс .test для тестовых файлов

### Использование TypeScript
- Использовать TypeScript для всего кода; предпочитать типы интерфейсам
- Избегать enum; использовать const объекты вместо них
- Использовать React с TypeScript, используя типизацию пропсов и состояний
- Использовать строгий режим TypeScript
- Определять типы для всех API ответов

### UI и Стилизация
- Использовать Shadcn, Radix и Tailwind для компонентов и стилизации
- Реализовывать адаптивный дизайн с Tailwind CSS; использовать подход mobile-first
- Использовать CSS модули для изоляции стилей
- Следовать принципам доступности WCAG
- Реализовывать темную тему
- Оптимизировать для мобильных устройств

### Оптимизация Производительности
- Использовать встроенные оптимизации Next.js
- Использовать Suspense для асинхронных компонентов
- Реализовывать ленивую загрузку для маршрутов и компонентов
- Оптимизировать изображения: использовать формат WebP, включать данные о размерах
- Использовать кэширование на стороне клиента и сервера
- Реализовывать прогрессивную загрузку изображений
- Оптимизировать бандл с помощью tree shaking
- Использовать Server Components где возможно

### Управление Состоянием
- Использовать React Query для серверного состояния
- Использовать Zustand или Jotai для клиентского состояния
- Реализовывать оптимистичные обновления
- Правильно обрабатывать ошибки и состояния загрузки
- Использовать кэширование и инвалидацию кэша

### Безопасность
- Реализовывать аутентификацию и авторизацию
- Защищать от XSS и CSRF атак
- Валидировать все входные данные
- Использовать HTTPS
- Реализовывать rate limiting
- Безопасно хранить чувствительные данные

### Тестирование
- Писать unit тесты для компонентов и хуков
- Использовать React Testing Library
- Реализовывать интеграционные тесты
- Тестировать доступность
- Проводить E2E тестирование с Cypress или Playwright
- Использовать моки для API запросов

### SEO и Метрики
- Оптимизировать метаданные для SEO
- Использовать семантический HTML
- Реализовывать OpenGraph теги
- Мониторить Core Web Vitals
- Реализовывать аналитику
- Использовать структурированные данные

### Ключевые Конвенции
- Использовать React Query для управления состоянием
- Оптимизировать Web Vitals (LCP, CLS, FID)
- Использовать встроенные функции Next.js

### Рекомендации по Фреймворку
- Следовать правильной структуре директорий
- Использовать встроенные функции:
  - App Router для маршрутизации
  - Server Components где возможно
  - API Routes для серверной функциональности
  - Middleware для глобальной функциональности
- Использовать правильные методы получения данных
- Реализовывать лучшие практики SEO

### Лучшие Практики
- Использовать правильные определения компонентов
- Использовать реактивное управление состоянием
- Использовать внедрение зависимостей когда уместно
- Реализовывать пользовательские хуки для переиспользуемой логики
      